```
π“ μ”μ•½

```
<br>

ν¬μΈν„° μ΄λ²¤νΈλ” λ§μ°μ¤, ν„°μΉν, ν„°μΉμ¤ν¬λ¦° λ“± λ‹¤μ–‘ν• λ””λ°”μ΄μ¤ μΈν’‹μ„ μ²λ¦¬ν•κΈ° μ„ν• ν„λ€μ‹ λ°©λ²•μ…λ‹λ‹¤.

<br>

# κ°„λ‹¨ν• μ—­μ‚¬

- μ›λ‚ μ—λ” λ§μ°μ¤ μ΄λ²¤νΈλ§ μμ—μµλ‹λ‹¤. <br>

  μƒλ΅ μƒκ²¨λ‚ ν„°μΉ λ””λ°”μ΄μ¤λ“¤μ€ κΈ°μ΅΄ μ¤ν¬λ¦½νΈλ΅ λ™μ‘ν•κΈ° μ„ν•΄ λ§μ°μ¤ μ΄λ²¤νΈλ¥Ό λ°μƒμ‹μΌ°μµλ‹λ‹¤ (μ•„μ§λ„ κ·Έλ¬ν•¨).<br>
  ν•μ§€λ§ λ§μ°μ¤λ³΄λ‹¤ λ‹¤μ–‘ν• μΈν’‹μ΄ κ°€λ¥ν•¨μ—λ„(multi-touch λ“±) λ§μ°μ¤ μ΄λ²¤νΈλ” μ΄λ¥Ό κ°λ‹Ήν•  ν”„λ΅νΌν‹°κ°€ μ—†μ—μµλ‹λ‹¤.
- λ”°λΌμ„ μ΄λ¥Ό μ„ν• ν„°μΉ μ΄λ²¤νΈκ°€ λ§λ“¤μ–΄μ΅μµλ‹λ‹¤ (ex. `touchstart` `touchend` `touchmove`). <br>
  ν•μ§€λ§ ν„°μΉν λ“± λ‹¤λ¥Έ κΈ°λ¥μ„ κ°€μ§„ λ””λ°”μ΄μ¤κΉμ§€ μ»¤λ²„ν•κΈ°μ— μ¶©λ¶„μΉ μ•μ•κ³ , ν„°μΉ/λ§μ°μ¤ μ΄λ²¤νΈλ¥Ό μ „λ¶€ λ“£λ” μ½”λ“λ¥Ό μ‘μ„±ν•κΈ°κ°€ λ²κ±°λ΅μ› μµλ‹λ‹¤.
- μ΄μ— λ§λ“¤μ–΄μ§„ κ²ƒμ΄ ν¬μΈν„° μ΄λ²¤νΈμ…λ‹λ‹¤.<br>
  λ‹¤μ–‘ν• ν¬μΈν… λ””λ°”μ΄μ¤μ— λ‹¨μΌν™”λ μ΄λ²¤νΈλ¥Ό μ κ³µν•©λ‹λ‹¤.
  
ν„μ¬ [Pointer Events Level 2](https://www.w3.org/TR/pointerevents2/) λ…μ„Έκ°€ λ¨λ“  μ£Όμ” λΈλΌμ°μ €μ—μ„ μ§€μ›λκ³ , μ΄μ™€ λ€λ¶€λ¶„ νΈν™λλ” [Pointer Events Level 3](https://w3c.github.io/pointerevents/)κ°€ λ‚μ™”μµλ‹λ‹¤. 

**IE 10, Safari 12 κ°™μ΄ μ›λ‚  λΈλΌμ°μ €μ—μ„ μ‘μ—…ν•λ” κ² μ•„λ‹λΌλ©΄, λ”μ΄μƒ λ§μ°μ¤/ν„°μΉ μ΄λ²¤νΈλ” μ‚¬μ©ν•  ν•„μ”κ°€ μ—†μµλ‹λ‹¤ β€“ ν¬μΈν„° μ΄λ²¤νΈλ΅ λ€μ²΄ν•  μ μμµλ‹λ‹¤.** μ›λ‚  λΈλΌμ°μ €μ—λ” ν΄λ¦¬ν•„μ΄ ν•„μ”ν•©λ‹λ‹¤.

<br>

# ν¬μΈν„° μ΄λ²¤νΈ νƒ€μ…

ν¬μΈν„° μ΄λ²¤νΈλ” λ§μ°μ¤ μ΄λ²¤νΈμ™€ λΉ„μ·ν• μ΄λ¦„μ„ κ°€μ§‘λ‹λ‹¤. 

![image](https://user-images.githubusercontent.com/65887537/208558378-7e3fb448-3230-474d-9422-c03fe9a72d5c.png)

### π’΅ κΈ°μ΅΄ μ½”λ“μ—μ„ `mouse<event>`λ¥Ό `pointer<event>`λ΅ λ€μ²΄ν•΄λ„ λ§μ°μ¤μ™€ μ λ™μ‘ν•©λ‹λ‹¤

ν„°μΉ λ””λ°”μ΄μ¤μ— λ€ν• μ§€μ› μ„±λ¥λ„ "magically" κ°μ„ λ©λ‹λ‹¤. λ‹¨, CSSμ— `touch-action: none`μ„ μ¶”κ°€ν•΄μ•Όν•  μλ„ μμµλ‹λ‹¤ (μ•„λ `pointercancel` μ°Έκ³ ).

<br>

# ν¬μΈν„° μ΄λ²¤νΈ ν”„λ΅νΌν‹°

λ§μ°μ¤ μ΄λ²¤νΈμ™€ λ™μΌν• ν”„λ΅νΌν‹°(ex. `clientX/Y` `target`)μ™€, μ¶”κ°€λ΅ λ‹¤μ λ‡κ°€μ§€ ν”„λ΅νΌν‹°λ¥Ό κ°€μ§‘λ‹λ‹¤.

- `pointerId` β€“ μ΄λ²¤νΈλ¥Ό λ°μƒμ‹ν‚¨ ν¬μΈν„°μ κ³ μ  μ‹λ³„μ. λΈλΌμ°μ €κ°€ μƒμ„±ν•λ©°, λ‹¤μμ ν¬μΈν„°λ¥Ό μ²λ¦¬ν•  μ μκ² ν•΄μ¤λ‹λ‹¤.
- `pointerType` β€“ ν¬μΈν… λ””λ°”μ΄μ¤μ νƒ€μ…. λ¬Έμμ—΄μ΄λ©°, κ°’μ€ "mouse" "pen" "touch" μ¤‘ ν•λ‚μ…λ‹λ‹¤.
- `isPrimary` β€“ μ²« ν¬μΈν„°λΌλ©΄ κ°’μ΄ `true` μ…λ‹λ‹¤ (λ©€ν‹° ν„°μΉμ—μ„ μ²«λ²μ§Έ μ†κ°€λ½ ν„°μΉ)

λ‡λ‡ λ””λ°”μ΄μ¤λ” μ ‘μ΄‰ λ©΄μ κ³Ό μ••λ ¥λ„ μΈ΅μ •ν•©λ‹λ‹¤. λ‹¨, λ€λ¶€λ¶„μ λ””λ°”μ΄μ¤μ—μ„λ” μ§€μ›λμ§€ μ•λ” κ°’μ…λ‹λ‹¤([λ…μ„Έ](https://w3c.github.io/pointerevents/#pointerevent-interface)).

- `width` β€“ ν¬μΈν„°κ°€ μ ‘μ΄‰ν• λ©΄μ μ λ„“μ΄. μ§€μ›λμ§€ μ•μΌλ©΄(ex. λ§μ°μ¤ λ“±μ—μ„) κ°’μ€ μ–Έμ λ‚ `1`.
- `height` β€“ ν¬μΈν„°κ°€ μ ‘μ΄‰ν• λ©΄μ μ λ†’μ΄. μ§€μ›λμ§€ μ•μΌλ©΄ κ°’μ€ μ–Έμ λ‚ `1`.
- `pressure` β€“ ν¬μΈν„° νμ μ••λ ¥. `0`~`1`. μ§€μ›ν•μ§€ μ•λ” λ””λ°”μ΄μ¤μ—μ„ κ°’μ€ `0.5`(λ„λ¦„) μ•„λ‹λ©΄ `0`.
- `tangentialPressure` β€“ μ •κ·ν™”λ νƒ„μ  νΈ μ••λ ¥
- `tiltX` `tiltY` `twist` β€“ νμ—λ§ ν•΄λ‹Ήν•λ” ν”„λ΅νΌν‹°λ΅, ν‘λ©΄μ— μƒλ€μ μΌλ΅ νμ΄ μ–΄λ–»κ² μ„μΉν•λ” μ§€ λ‚νƒ€λƒ„.

<br>

# λ©€ν‹° ν„°μΉ

`pointerId`μ™€ `isPrimary` ν”„λ΅νΌν‹°λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.

1. μ²«λ²μ§Έ μ†κ°€λ½ ν„°μΉ: `isPrimary=true`μ™€ κ³ μ μ `pointerId`μ™€ ν•¨κ» `pointerdown` λ°μƒ
3. λ‘λ²μ§Έ~nλ²μ§Έ μ†κ°€λ½ ν„°μΉ (μ²«λ²μ§Έκ°€ μ•„μ§ ν„°μΉ μ¤‘μ΄λΌλ” κ°€μ • ν•μ—): `isPrimary=false`μ™€ μ†κ°€λ½λ§λ‹¤ λ‹¤λ¥Έ `pointerId`μ™€ ν•¨κ» `pointerdown` λ°μƒ

`pointerId`λ” μ „μ²΄ λ””λ°”μ΄μ¤κ°€ μ•„λ‹ κ° ν„°μΉ μ†κ°€λ½λ§λ‹¤ ν• λ‹Ήλλ” κ²ƒμ…λ‹λ‹¤. <br>
ν„°μΉν• μ†κ°€λ½μ„ μ›€μ§μ΄κ±°λ‚ λ–Όμ–΄λ‚΄λ©΄, λ™μΌν• `pointerId`λ΅ `pointermove` `pointerup` μ΄λ²¤νΈκ°€ λ°μƒν•©λ‹λ‹¤.

<br>

# pointercancel μ΄λ²¤νΈ

`pointercancel` μ΄λ²¤νΈλ” ν¬μΈν„° μƒνΈμ‘μ©μ΄ μ§„ν–‰λλ μ¤‘, μ–΄λ–¤ μƒν™©μ΄ λ°μƒν•΄ μ¤‘λ‹¨λκ³  λ”μ΄μƒμ ν¬μΈν„° μ΄λ²¤νΈκ°€ λ°μƒν•μ§€ μ•κ²λ  λ• λ°μƒν•©λ‹λ‹¤.

- ν¬μΈν„° λ””λ°”μ΄μ¤ ν•λ“μ›¨μ–΄κ°€ λ¬Όλ¦¬μ μΌλ΅ μ‘λ™ μ¤‘λ‹¨λ μƒν™©
- μ¥μΉ λ°©ν–¥μ΄ λ°”λ€ μƒν™© (νƒ€λΈ”λ › νμ „ λ“±)
- The browser decided to handle the interaction on its own, considering it a mouse gesture or zoom-and-pan action or something else.

<br>

μλ¥Ό λ“¤μ–΄, μ΄μ „ μ±•ν„°μ—μ„ ballμ drag'n'dropμ„ λ³΄κ² μµλ‹λ‹¤. λ‹¤μκ³Ό κ°™μ€ μμ„λ΅ μ μ € μ•΅μ…κ³Ό μ΄λ²¤νΈκ°€ λ°μƒν•κ² μ£ :

1. μ μ €κ°€ μ΄λ―Έμ§€λ¥Ό λ„λ¦„ (`pointerdown` λ°μƒ)
2. ν¬μΈν„°λ¥Ό μ›€μ§μ„ (`pointermove` λ°μƒ: λ“λκ·Έκ°€ λ°μƒν•κΈ° μ „κΉμ§€(?) μ—¬λ¬λ² λ°μƒ κ°€λ¥)
3. **μ κΉ!** λΈλΌμ°μ €μ—μ„ μμ²΄μ μΌλ΅ μ΄λ―Έμ§€ drag'n'dropμ„ μ§€μ›ν•κΈ° λ•λ¬Έμ—, μ΄ κΈ°λ¥μ΄ μ‘λ™ν•΄ ν”„λ΅μ„Έμ¤λ¥Ό νƒμ·¨ν•©λ‹λ‹¤. `pointercancel` μ΄λ²¤νΈκ°€ λ°μƒν•©λ‹λ‹¤.
   - μ΄μ  λΈλΌμ°μ € λ΅μ§μ΄ λ™μ‘ν•κΈ° λ•λ¬Έμ—, μ‚¬μ©μκ°€ ballμ„ λΈλΌμ°μ € λ°–μΌλ΅ λΉΌλ‚΄μ–΄ λ©”μΌ ν”„λ΅κ·Έλ¨μ΄λ‚ νμΌ λ§¤λ‹μ €μ—λ„ μ§‘μ–΄λ„£μ„ μ μκ² λ©λ‹λ‹¤.
   - `pointermove` μ΄λ²¤νΈλ” λ”μ΄μƒ λ°μƒν•μ§€ μ•μµλ‹λ‹¤.

[λ°λ¨ λ³΄κΈ°](https://ko.javascript.info/pointer-events#:~:text=events%20are%20generated.-,Here%E2%80%99s,-the%20drag%E2%80%99n%E2%80%99drop%20demo)

<br>

**`pointercancel`μ„ ν”Όν•λ ¤λ©΄ λΈλΌμ°μ € λ””ν΄νΈ μ•΅μ…μ„ λ§‰μ•„μ¤λ‹λ‹¤.**

1. μμ²΄ drag'n'dropμ„ λ§‰μµλ‹λ‹¤.
   - `ball.ondragstart = () => false` <= λ§μ°μ¤ μ΄λ²¤νΈλ” λ§‰μ•μµλ‹λ‹¤!
2. ν„°μΉ λ””λ°”μ΄μ¤μ—λ” drag'n'drop μ™Έμ—λ„ λ‹¤λ¥Έ ν„°μΉ κ΄€λ ¨ λΈλΌμ°μ € μ•΅μ…μ΄ μ΅΄μ¬ν•©λ‹λ‹¤. μ΄ λν• λ§‰μΌλ ¤λ©΄:
   - CSSμ—μ„ `#ball { touch-action: none }` <= ν„°μΉ λ””λ°”μ΄μ¤μ—μ„λ„ λ™μ‘ν•©λ‹λ‹¤!

μ΄μ  μ›ν•λ” drag'n'drop μ½”λ“λ¥Ό μ‘μ„±ν•λ©΄ μ›ν•λ” λ€λ΅ λ™μ‘ν•©λ‹λ‹¤.

<br>

# ν¬μΈν„° μΊ΅μ²λ§

ν¬μΈν„° μ΄λ²¤νΈμ νΉλ³„ν• κΈ°λ¥μ…λ‹λ‹¤. μ£Όμ” λ©”μ„λ“λ”:

- `elem.setPointerCapture(pointerId)` β€“ μ£Όμ–΄μ§„ `pointerId`λ¥Ό κ°€μ§„ μ΄λ²¤νΈλ¥Ό `elem`μ— λ°”μΈλ”©ν•©λ‹λ‹¤. ν•΄λ‹Ή `pointerId`λ¥Ό κ°€μ§„ λ¨λ“  ν¬μΈν„° μ΄λ²¤νΈλ” `elem`μ„ targetμΌλ΅ κ°€μ§€κ² λμ–΄, μ‹¤μ  λ°μƒν• κ³³κ³Ό μƒκ΄€μ—†μ΄ `elem`μ—μ„ λ°μƒν• κ²ƒμ²λΌ λ©λ‹λ‹¤. 

ν•΄λ‹Ή λ°”μΈλ”©μ€ λ‹¤μ μƒν™©μ—μ„ μ κ±°λ©λ‹λ‹¤:

- `pointerup` λλ” `pointercancel` μ΄λ²¤νΈκ°€ λ°μƒν–μ„ λ• μλ™μΌλ΅
- `elem`μ΄ documentμ—μ„ μ κ±°λμ„ λ• μλ™μΌλ΅
- `elem.releasePointerCapture(pointerId)`μ„ νΈμ¶ν–μ„ λ•

<br>

**ν¬μΈν„° μΊ΅μ²λ§μ€ drag'n'dropκ³Ό κ°™μ€ μƒνΈμ‘μ©μ„ λ‹¨μν™”ν•λ” λ° μ‚¬μ©λ  μ μμµλ‹λ‹¤.**

μλ¥Ό λ“¤μ–΄, [μ¬λΌμ΄λ” μμ ](https://ko.javascript.info/mouse-drag-and-drop#:~:text=%EC%A4%91%EC%9A%94%EB%8F%84%3A%205-,Create%20a%20slider%3A,-Drag%20the%20blue)λ¥Ό μƒκ°ν•΄λ΄…μ‹λ‹¤. μ‚¬μ©μκ°€ μ¬λΌμ΄λ” λ²„νΌ `thumb`λ¥Ό λ„λ¥΄κ³ (`pointerdown`) μ›€μ§μ…λ‹λ‹¤(`pointermove`)

μ΄λ•, ν¬μΈν„°κ°€ μ¬λΌμ΄λ” μ„/μ•„λλ΅ μΉμ°μΉλ”λΌλ„ `thumb`λ” μν‰μΌλ΅λ§ μ›€μ§μ—¬μ•Ό ν•©λ‹λ‹¤. μ΄λ¥Ό μ²λ¦¬ν•κΈ° μ„ν•΄ `pointermove` μ΄λ²¤νΈ ν•Έλ“¤λ¬λ¥Ό `document`μ— ν• λ‹Ήν•΄μ•Ό ν–μ£ . μ΄λ” μΆ€ λ²μ΅ν• ν•΄κ²°μ±…μΌλ΅, document λ‚΄μ—μ„ μ›€μ§μ΄λ‹¤ μ¬λΌμ΄λ”μ™€ κ΄€λ ¨ μ—†λ” λ‹¤λ¥Έ μ΄λ²¤νΈ ν•Έλ“¤λ¬λ¥Ό νΈμ¶ν•  μλ„ μλ‹¤λ” λ¬Έμ κ°€ μμµλ‹λ‹¤.

ν¬μΈν„° μΊ΅μ²λ§μ€ `pointermove`λ¥Ό `thumb`μ— λ°”μΈλ”©μ‹ν‚¤λ©° μ΄ λ¬Έμ λ¥Ό ν•΄κ²°ν•©λ‹λ‹¤. ([μ½”λ“](https://ko.javascript.info/pointer-events#:~:text=Here%E2%80%99s%20the%20essential%20code%3A))

- `pointerdown` ν•Έλ“¤λ¬μ—μ„ `thumb.setPointerCapture(event.pointerId)`λ¥Ό νΈμ¶ν•©λ‹λ‹¤.
- μ΄ν›„ λ°μƒν•λ” `pointerup/cancel`λ” `thumb`μ— λ°”μΈλ”©λ©λ‹λ‹¤.
- λ°”μΈλ”©μ€ `pointerup`μ΄ λ°μƒν•λ©΄ μλ™μΌλ΅ μ κ±°λκΈ° λ•λ¬Έμ— λ”°λ΅ μ‹ κ²½μ“Έ ν•„μ”κ°€ μ—†μµλ‹λ‹¤.

Besides, coordinate properties of the event objects, such as `clientX/clientY` will still be correct β€“ the capturing only affects `target/currentTarget`.

<br>

ν¬μΈν„° μΊ΅μ²λ§μ„ μ‚¬μ©ν•΄ μƒκΈ°λ” μ¥μ μ€ λ‘κ°€μ§€μ…λ‹λ‹¤.

1. μ „μ²΄ `document`μ— ν•Έλ“¤λ¬λ¥Ό μ¶”κ°€ν•κ³  μ‚­μ ν•μ§€ μ•μ•„λ„ λμ–΄ μ½”λ“κ°€ κ°„λ‹¨ν•΄μ§‘λ‹λ‹¤.
2. documentμ— λ‹¤λ¥Έ `pointermove` ν•Έλ“¤λ¬κ°€ μμ–΄λ„ μ‹¤μλ΅ νΈλ¦¬κ±°λλ” μΌμ΄ μ—†μµλ‹λ‹¤.

<br>

### ν¬μΈν„° μΊ΅μ²λ§ μ΄λ²¤νΈ

ν¬μΈν„° μΊ΅μ²λ§κ³Ό κ΄€λ ¨λ ν¬μΈν„° μ΄λ²¤νΈκ°€ λ‘κ° μμµλ‹λ‹¤.

- `gotpointercapture` : μ”μ†κ°€ μΊ΅μ²λ§μ„ μ„ν•΄ `setPointerCapture`λ¥Ό μ‚¬μ©ν–μ„ λ• λ°μƒ
- `lostpointercapture` : μΊ΅μ²κ°€ ν’€λ Έμ„ λ• λ°μƒ (`releasePointerCapture`λ¥Ό νΈμ¶ν•΄μ„ λλ” `pointerup/pointercancel`μ‹ μλ™μΌλ΅)


<br><br><br>

μ¶μ² : https://ko.javascript.info/pointer-events
