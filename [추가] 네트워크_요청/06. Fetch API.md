```
ğŸ“ ìš”ì•½
```
<br>

ì—¬ê¸°ì„œ **ì–¸ê¸‰ë˜ëŠ” ì˜µì…˜ë“¤ ëŒ€ë¶€ë¶„ì€ ì˜ ì“°ì´ì§€ ì•ŠìŠµë‹ˆë‹¤**. `fetch`ê°€ ì´ëŸ° ê±¸ í•  ìˆ˜ë„ ìˆêµ¬ë‚˜ ì •ë„ë¡œ ì•Œì•„ë‘¡ì‹œë‹¤.

`fetch`ì˜ ëª¨ë“  ì˜µì…˜ê³¼ ë””í´íŠ¸ê°’ (ë‹¤ë¥¸ê°’ì€ ì£¼ì„ì—):

```js
let promise = fetch(url, {
  method: "GET", // POST, PUT, DELETE, etc.
  headers: {
    // the content type header value is usually auto-set
    // depending on the request body
    "Content-Type": "text/plain;charset=UTF-8"
  },
  body: undefined // string, FormData, Blob, BufferSource, or URLSearchParams
  referrer: "about:client", // or "" to send no Referer header,
                            // or an url from the current origin
  referrerPolicy: "no-referrer-when-downgrade", // no-referrer, origin, same-origin...
  mode: "cors", // same-origin, no-cors
  credentials: "same-origin", // omit, include
  cache: "default", // no-store, reload, no-cache, force-cache, or only-if-cached
  redirect: "follow", // manual, error
  integrity: "", // a hash, like "sha256-abcdef1234567890"
  keepalive: false, // true
  signal: undefined, // AbortController to abort request
  window: window // null
});
```

<br><br>

# referrer, referrerPolicy

`fetch`ê°€ HTTP `Referer` í—¤ë”ë¥¼ ì–´ë–»ê²Œ ì„¤ì •í• ì§€ ê²°ì •í•©ë‹ˆë‹¤. í•´ë‹¹ í—¤ë”ëŠ” ë³´í†µ ìë™ìœ¼ë¡œ ì„¤ì •ë˜ë©° ìš”ì²­ì„ ë§Œë“  í˜ì´ì§€ì˜ ì „ì²´ urlì„ í¬í•¨í•©ë‹ˆë‹¤. ë§ì€ ê²½ìš° ì¤‘ìš”í•˜ì§€ ì•Šìœ¼ë‚˜, ë³´ì•ˆìƒ ì‚­ì œí•˜ê±°ë‚˜ ë‹¨ì¶•í•´ì•¼í•  ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì™¸ë¶€ì—ì„œ URL êµ¬ì¡°ë¥¼ ì•Œì§€ ëª»í•˜ê²Œ í•˜ê³  ì‹¶ì€ ì–´ë“œë¯¼ êµ¬ì—­ì—ì„œ ìš”ì²­í•˜ëŠ” ê²½ìš°ì£ .

**`referer` ì˜µì…˜ì€ í˜„ì¬ ì˜¤ë¦¬ì§„ì—ì„œ `Referer`ì„ ì„¤ì •í•˜ê±°ë‚˜ ì‚­ì œí•˜ë„ë¡** í•´ì¤ë‹ˆë‹¤. Refererì„ ë³´ë‚´ì§€ ì•Šì„ë©´ ë¹ˆ ë¬¸ìì—´ `""`ì„, ë˜ëŠ” ë™ì¼í•œ ì˜¤ë¦¬ì§„ì˜ ë‹¤ë¥¸ urlì„ ë„£ì–´ì¤ë‹ˆë‹¤. (https://javascript.info ì‚¬ì´íŠ¸ì— ìˆëŠ” ê²½ìš°, `referer: "https://javascript.info/anotherpage"` ë“± í˜„ì¬ ì˜¤ë¦¬ì§„ ë‚´ì—ì„œë§Œ Refererì„ ì„¤ì •í•  ìˆ˜ ìˆìŒ)

**`referrerPolicy` ì˜µì…˜ì€ `Referer`ì— ëŒ€í•œ ê·œì¹™ì„ ì„¤ì •**í•©ë‹ˆë‹¤. <br>
ìš”ì²­ì€ 3 íƒ€ì…ìœ¼ë¡œ ë‚˜ë‰˜ëŠ”ë°:

1. ê°™ì€ ì˜¤ë¦¬ì§„ì— ìš”ì²­
2. ë‹¤ë¥¸ ì˜¤ë¦¬ì§„ì— ìš”ì²­
3. HTTPSë¡œë¶€í„° HTTPë¡œ ìš”ì²­ (from safe to unsafe protocol) <- ì´ë• ì˜ˆì™¸ì ìœ¼ë¡œ `Referer` ì—†ìŒ

ê° ìš”ì²­ íƒ€ì…ì— ëŒ€í•œ ëŒ€ëµì ì¸(general) ê·œì¹™ë§Œ ë¸Œë¼ìš°ì €ì—ê²Œ ì„¤ëª…í•©ë‹ˆë‹¤. `Referer`ì— íŠ¹ì •ê°’ì„ ì„¤ì •í•˜ëŠ” `referer`ê³¼ ë‹¤ë¥´ì£ .

([ì „ì²´ ì˜µì…˜](https://ko.javascript.info/fetch-api#:~:text=%22no%2Dreferrer%2Dwhen%2Ddowngrade%22%20%E2%80%93%20the,%2C%20even%20for%20HTTPS%E2%86%92HTTP%20requests.))

### ğŸ’¡ Referrer policyëŠ” fetchì—ë§Œ ì ìš©ë˜ëŠ” ê²ƒì´ ì•„ë‹˜ [ì°¸ê³ ](https://ko.javascript.info/fetch-api#:~:text=Referrer%20policy%20is,rel%3D%22noreferrer%22%3E.)

<br><br>

# mode

`mode`ëŠ” **í¬ë¡œìŠ¤ ì˜¤ë¦¬ì§„ ìš”ì²­ì„ ë§‰ëŠ” ì„¸ì´í”„ê°€ë“œ** ì˜µì…˜ì…ë‹ˆë‹¤. `fetch`ì˜ URLì´ ì„œë“œíŒŒí‹°ì—ì„œ ì˜¤ëŠ” ê²½ìš°, í¬ë¡œìŠ¤ì˜¤ë¦¬ì§„ capabilitiesë¥¼ ì œí•œí•˜ê¸° ìœ„í•œ "ì „ì› ìŠ¤ìœ„ì¹˜"ê°™ì€ ê²ƒì´ í•„ìš”í•œ ê²½ìš° ìœ ìš©í•©ë‹ˆë‹¤.

- `"cors"` â€“ ê¸°ë³¸ê°’. CORSì— ë”°ë¼ í¬ë¡œìŠ¤ì˜¤ë¦¬ì§„ ìš”ì²­ í—ˆìš©
- `"same-origin"` â€“ í¬ë¡œìŠ¤ì˜¤ë¦¬ì§„ ìš”ì²­ ê¸ˆì§€
- `"no-cors"` â€“ ì˜¤ì§ ë‹¨ìˆœ(simple) í¬ë¡œìŠ¤ì˜¤ë¦¬ì§„ ìš”ì²­ë§Œ í—ˆìš©

<br><br>

# credentials

`credentials`ì€ `fetch`ê°€ **ì¿ í‚¤ë‚˜ HTTP-Authorization í—¤ë”ë¥¼ ìš”ì²­ê³¼ í•¨ê»˜ ë³´ë‚¼ì§€** ê²°ì •í•©ë‹ˆë‹¤.

- `"same-origin"` â€“ ê¸°ë³¸ê°’. í¬ë¡œìŠ¤ì˜¤ë¦¬ì§„ ìš”ì²­ì´ë©´ ë³´ë‚´ì§€ ì•ŠìŒ
- `"include"` â€“ ì–¸ì œë‚˜ ì „ì†¡. í¬ë¡œìŠ¤ì˜¤ë¦¬ì§„ ì„œë²„ì—ì„œ `Accept-Control-Allow-Credentials`ë¥¼ ì„¤ì •í•´ì•¼ ìë°”ìŠ¤í¬ë¦½íŠ¸ê°€ ì‘ë‹µì— ì ‘ê·¼í•  ìˆ˜ ìˆìŒì— ìœ ì˜
- `"omit"` â€“ ë³´ë‚´ì§€ ì•ŠìŒ. ë™ì¼ì˜¤ë¦¬ì§„ ìš”ì²­ì´ë¼ë„.

<br><br>

# cache

`fetch`ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ HTTP-ìºì‹±ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ì¦‰, ì¼ë°˜ HTTP ìš”ì²­ì²˜ëŸ¼ `Expires`, `Cache-Control` í—¤ë”ê°’ì„ ë”°ë¥´ê³  `If-Modified-Since`ë¥¼ ì „ì†¡í•˜ëŠ” ë“±ì˜ ì‘ì—…ì„ í•©ë‹ˆë‹¤. `cache` ì˜µì…˜ìœ¼ë¡œ **ìºì‹±ì„ í•˜ì§€ ì•Šê±°ë‚˜ ì¡°ì •**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- "default"` â€“ fetch uses standard HTTP-cache rules and headers,
- "no-store"` â€“ totally ignore HTTP-cache, this mode becomes the default if we set a header If-Modified-Since, If-None-Match, If-Unmodified-Since, If-Match, or If-Range,
- "reload"` â€“ donâ€™t take the result from HTTP-cache (if any), but populate cache with the response (if response headers allow),
- "no-cache"` â€“ create a conditional request if there is a cached response, and a normal request otherwise. Populate HTTP-cache with the response,
- "force-cache"` â€“ use a response from HTTP-cache, even if itâ€™s stale. If thereâ€™s no response in HTTP-cache, make a regular HTTP-request, behave normally,
- "only-if-cached"` â€“ use a response from HTTP-cache, even if itâ€™s stale. If thereâ€™s no response in HTTP-cache, then error. Only works when mode is "same-origin".

<br><br>

# redirect

`fetch`ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ `301` `302` ë“±ì˜ HTTP-redirectë¥¼ ì˜ ë”°ë¥´ë‚˜, `redirect`ë¡œ ë°”ê¿€ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `"follow"` â€“ the default, follow HTTP-redirects,
- `"error"` â€“ error in case of HTTP-redirect,
- `"manual"` â€“ donâ€™t follow HTTP-redirect, but `response.url` will be the new URL, and `response.redirected` will be `true`, so that we can perform the redirect manually to the new URL (if needed).

<br><br>

# integrity

`integrity` ì˜µì…˜ìœ¼ë¡œ ì‘ë‹µì´ ì‚¬ì „ì— ì•Œë ¤ì§„ ì²´í¬ì„¬ê³¼ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•´ì‹œ í•¨ìˆ˜ëŠ” SHA-256, SHA-384, ê·¸ë¦¬ê³  SHA-512ê°€ ì§€ì›ë©ë‹ˆë‹¤. [ì˜ˆì‹œ](https://ko.javascript.info/fetch-api#:~:text=For%20example%2C%20we%E2%80%99re,error%20is%20triggered.)

<br><br>

# keepalive

ìš”ì²­ì´ ìš”ì²­ì„ ìƒì„±í•œ ì›¹í˜ì´ì§€ë³´ë‹¤ ë” ì˜¤ë˜ ì‚´ ìˆ˜ ìˆë„ë¡(outlive) í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì›¹í˜ì´ì§€ë¥¼ ë°©ë¬¸í•œ ì‚¬ìš©ìì˜ í–‰ë™ íŒ¨í„´ì„ ë¶„ì„í•˜ê³  ì‹¶ë‹¤ë©´ ì‚¬ìš©ìê°€ í˜ì´ì§€ë¥¼ ë– ë‚œ í›„ ì„œë²„ì— ë°ì´í„°ë¥¼ ì €ì¥í•´ì•¼ í•©ë‹ˆë‹¤. **ì¼ë°˜ì ìœ¼ë¡œ í˜ì´ì§€ë¥¼ ë– ë‚˜ documentê°€ unloadë˜ë©´ ëª¨ë“  ì—°ê´€ëœ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì´ ì¤‘ë‹¨**(abort)ë˜ì§€ë§Œ, `keepalive` ì˜µì…˜ìœ¼ë¡œ ë¸Œë¼ìš°ì €ì—ê²Œ í•´ë‹¹ ìš”ì²­ì„ **ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰í•˜ë„ë¡** ìš”ì²­í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. [ëª‡ê°€ì§€ í•œê³„ê°€ ìˆìŠµë‹ˆë‹¤](https://ko.javascript.info/fetch-api#:~:text=It%20has%20a,to%20such%20requests.)

```js
window.onunload = function() {
  fetch('/analytics', {
    method: 'POST',
    body: "statistics",
    keepalive: true
  });
};
```

<br><br><br>

ì¶œì²˜: https://ko.javascript.info/fetch-api
