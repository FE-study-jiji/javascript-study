```
📍 요약
```
<br>

`XMLHttpRequest`는 자바스크립트로 HTTP 요청을 만들 수 있게 해주는 **브라우저 내장 객체**입니다.

이름에 `XML`이 있지만 다양한 데이터를 처리할 수 있습니다. 현재는 `fetch`가 우세하지만, `XMLHttpRequest`를 써야할 3가지 상황이 있습니다.

1. `XMLHttpRequest`를 사용하는 기존 스크립트를 지원하기 위해
2. 옛날 브라우저를 지원하고 싶지만 폴리필은 싫을 때 (스크립트를 작게 유지하기 위해)
3. `fetch`가 아직 못 하는 기능을 사용하기 위해 (예: **업로드 진도 추적**)

<br><br>

# 기본

XMLHttpRequest엔 두가지 동작 모드가 있습니다: **동기적/비동기적**. 대부분 비동기를 사용합니다.

요청을 하려면:

1. `XMLHttpRequest` 생성

   ```js
   let xhr = new XMLHttpRequest();
   ```
2. 초기화

   대개 생성 직후에 초기화합니다. 이름과 달리 `open`은 커넥션을 여는 것이 아니라 요청을 configure합니다. `send`를 호출해야 네트워크 활동이 시작됩니다.
   ```js
   xhr.open(method, URL, [async, user, password])
   ```
   - `method` – HTTP 메서드
   - `async` – 기본값이 `true`. `false`면 동기적 요청이 됨
   - `user` `password` – 기본 HTTP auth를 위한 정보
3. 보냄

   커넥션을 열고 서버에 요청을 보냅니다. 
   ```js
   xhr.send([body])
   ```
4. 응답을 위해 `xhr` 이벤트를 기다림

   가장 많이 사용되는 3가지 이벤트:
   - `load` – 요청이 완료되고(**status가 400/500이라도**) 응답이 완전히 다운로드됨.
   - `error` – 요청을 할 수 없음 (네트워크 문제나 잘못된 URL)
   - `progress` – 응답이 다운로드되는 동안 일정주기로 발생하며, 얼마나 다운로드됐는지 보고함.
   
   응답은 다음 `xhr` 프로퍼티로 받을 수 있음
   - `status` & `statusText` – HTTP status 코드와 메시지
   - `response` (옛날 스크립트에선 `responseText`) – 서버 응답 body
   
   `xhr` 프로퍼티로 타임아웃을 걸 수도 있음
   - `xhr.timeout = 10000;` – 10초뒤에도 요청이 성공하지 않으면 취소되고 `timeout` 이벤트 발생

<br>

```js
let xhr = new XMLHttpRequest();
xhr.open('GET', '/article/xmlhttprequest/example/load');
xhr.send();

xhr.onload = function() { .. };
xhr.onprogress = function(event) { .. };
xhr.onerror = function() { .. };
```
[전체 코드](https://ko.javascript.info/xmlhttprequest#:~:text=//%201.%20Create%20a,%3B%0A%7D%3B)

<br><br>

# Response type

<br><br>

# Ready states

<br><br>

# Aborting request

<br><br>

# Synchronouse request

<br><br>

# HTTP 헤더

<br><br>

# POST, FormData

<br><br>

# 업로드 추적 

<br><br>

# 크로스오리진 요청

<br><br><br>

출처: 
