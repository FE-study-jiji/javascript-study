```
📍 [요약]
- 생성자 함수는 유사한 객체를 여러 개 만들 때 유용합니다.
- 생성자 함수(짧게 줄여서 생성자)는 일반 함수입니다. 다만, 일반 함수와 구분하기 위해 함수 이름 첫 글자를 대문자로 씁니다.
- 생성자 함수는 반드시 new 연산자와 함께 호출해야 합니다. 
  new와 함께 호출하면 내부에서 this가 암시적으로 만들어지고, 마지막엔 this가 반환됩니다.  
- 자바스크립트는 언어 차원에서 다양한 생성자 함수를 제공합니다. 
  날짜(Date), 집합(Set) 등의 내장 객체는 이런 생성자 함수를 이용해 만들 수 있습니다. 
```
<br/>

객체 리터럴 `{...}` 을 사용하면 객체를 쉽게 만들 수 있습니다.    
그런데 개발을 하다 보면 유사한 객체를 여러 개 만들어야 할 때가 생기곤 합니다.    
복수의 사용자, 메뉴 내 다양한 아이템을 객체로 표현하려고 하는 경우가 그렇죠.   

`'new'` 연산자와 생성자 함수를 사용하면 유사한 객체 여러 개를 쉽게 만들 수 있습니다.

<br/>

# 생성자 함수
생성자 함수(constructor function)와 일반 함수에 기술적인 차이는 없습니다. 다만 생성자 함수는 아래 두 관례를 따릅니다.

1. 함수 이름의 첫 글자는 대문자로 시작합니다.
2. 반드시 'new' 연산자를 붙여 실행합니다.
```js
function User(name) {
  this.name = name;
  this.isAdmin = false;
}

let user = new User("보라");

alert(user.name); // 보라
alert(user.isAdmin); // false
```

<br/> 

`new User(...)`를 써서 함수를 실행하면 아래와 같은 알고리즘이 동작합니다.

1. 빈 객체를 만들어 `this`에 할당합니다.   
2. 함수 본문을 실행합니다. `this`에 새로운 프로퍼티를 추가해 `this`를 수정합니다.
3. `this`를 반환합니다.

```js
function User(name) {
  // this = {};  (빈 객체가 암시적으로 만들어짐)

  // 새로운 프로퍼티를 this에 추가함
  this.name = name;
  this.isAdmin = false;

  // return this;  (this가 암시적으로 반환됨)
}
```

### new function() { … }
재사용할 필요가 없는 복잡한 객체를 만들어야 한다고 해봅시다. 
```js
let user = new function() {
  this.name = "John";
  this.isAdmin = false;

  // 사용자 객체를 만들기 위한 
  // 다양한 코드(지역 변수, 복잡한 로직, 구문 등의)가 여기에 들어갑니다.
};
```
위 생성자 함수는 익명 함수이기 때문에 어디에도 저장되지 않습니다.    
처음 만들 때부터 단 한 번만 호출할 목적으로 만들었기 때문에 재사용이 불가능합니다.    
이렇게 익명 생성자 함수를 이용하면 재사용은 막으면서 코드를 캡슐화 할 수 있습니다.  

<br/><br/>

## new.target과 생성자 함수
`new.target` 프로퍼티를 사용하면 함수가 `new`와 함께 호출되었는지 아닌지를 알 수 있습니다.   

일반적인 방법으로 함수를 호출했다면 `new.target`은 `undefined`를 반환합니다.    
반면 `new`와 함께 호출한 경우엔 `new.target`은 함수 자체를 반환해줍니다.

이를 활용해 일반적인 방법으로 함수를 호출해도 `new`를 붙여 호출한 것과 같이 동작하도록 만들어보겠습니다.
```js
function User(name) {
  if (!new.target) { // new 없이 호출해도
    return new User(name); // new를 붙여줍니다.
  }
  this.name = name;
}

let bora = User("보라"); // 'new User'를 쓴 것처럼 바꿔줍니다.

```

<br/><br/>

## 생성자와 return문
생성자 함수엔 보통 `return` 문이 없습니다.   
반환해야 할 것들은 모두 `this`에 저장되고, `this`는 자동으로 반환되기 때문에 반환문을 명시적으로 써 줄 필요가 없습니다.   

만약 `return` 문이 있다면 아래와 같은 간단한 규칙이 적용됩니다.

- 객체를 `return` 한다면 `this` 대신 객체가 반환됩니다.
- 원시형을 `return` 한다면 `return`문이 무시됩니다.


<br/><br/>
# 생성자 내 메서드
생성자 함수를 사용하면 매개변수를 이용해 객체 내부를 자유롭게 구성할 수 있습니다.    
`this`에 메서드를 더해주는 것도 가능합니다. 


<br/><br/><br/>


출처: https://ko.javascript.info/constructor-new
