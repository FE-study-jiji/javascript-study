
# 프로토타입 상속

프로토타입 상속(prototypal inheritance) 은 기존에 있는 기능을 가져와 확장해주는 자바스크립트 언어의 고유 기능입니다.

<br>

## [[Prototype]]

자바스크립트의 객체는 `[[Prototype]]`이라는 숨김 프로퍼티를 갖습니다.
`[[Prototype]]`의 값은 `null`이거나 다른 객체에 대한 참조가 됩니다. 이 때 참조 대상을 '프로토타입'이라 부릅니다.

`object`에서 프로퍼티를 읽으려고 하는데 해당 프로퍼티가 없으면 자바스크립트는 자동으로 프로토타입에서 프로퍼티를 찾습니다.
이런 동작 방식을 '프로토타입 상속’이라 부르고,
상속받은 프로퍼티를 '상속 프로퍼티(inherited property)'라고 합니다.

<br>

`[[Prototype]]`은 `__proto__`를 사용하여 개발자가 값을 설정할 수 있습니다.
`__proto__`는 `[[Prototype]]`용 **getter·setter** 입니다.
자바스크립트 명세서에선 브라우저 환경에서만 지원하도록 규정했지만, 실상은 서버 사이드를 포함한 모든 호스트 환경에서 지원합니다. 

단, 하위 호환성 때문에 여전히 `__proto__`를 사용할 순 있지만 **최근 작성된 스크립트에선 `__proto__` 대신 함수 `Object.getPrototypeOf`나 `Object.setPrototypeOf`을 써서** 프로토타입을 get/set합니다. 

```javascript
let animal = {
  eats: true
};
let rabbit = {
  jumps: true
};

rabbit.__proto__ = animal;
```

<br><br>

객체엔 오직 하나의 `[[Prototype]]`만 있을 수 있습니다.
하지만 **프로토타입 체인**을 통해 상속받을 수도 있습니다.
프로토타입 체이닝엔 두 가지 제약사항이 있습니다.

1. 순환 참조(circular reference)는 허용되지 않습니다. `__proto__`를 이용해 닫힌 형태로 다른 객체를 참조하면 에러가 발생합니다.
2. `__proto__`의 값은 객체나 `null`만 가능합니다. 다른 자료형은 무시됩니다.

<br>

## 프로토타입은 읽기 전용이다

프로토타입은 프로퍼티를 읽을 때만 사용하며, 프로퍼티를 추가, 수정하거나 지우는 연산은 객체에 직접 해야 합니다.

