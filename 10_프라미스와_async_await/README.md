### 05 프라미스 API

- Promise 클래스에는 5가지 정적 메서드가 있습니다.
  1. `Promise.all(promises)` – 모든 프라미스가 이행된 후 결괏값을 담은 배열을 반환합니다. 하나라도 실패하면 즉시 거부되고, 나머지 프라미스의 결과는 무시됩니다.
  2. `Promise.allSettled(promises)` – 모든 프라미스가 처리될 때까지 기다렸다가 그 결과(`{status, value}`)를 담은 배열을 반환합니다. (최신 문법)
  3. `Promise.race(promises)` – 가장 먼저 처리된 프라미스의 결과 또는 에러를 담은 프라미스를 반환합니다.
  4. `Promise.resolve(value)` – 주어진 값을 사용해 이행 상태의 프라미스를 만듭니다.
  5. `Promise.reject(error)` – 주어진 에러를 사용해 거부 상태의 프라미스를 만듭니다.
- 실무에선 `Promise.all`을 가장 많이 사용합니다.

### 06 프라미스화

- **프라미스화(promisification)**   
  콜백을 받는 함수를 프라미스를 반환하는 함수로 바꾸는 것
- 이후 배울 `async/await`와 함께 사용하면 더 좋습니다.   
  단, 여러 번 호출할 수 있는 콜백과 달리 단 하나의 결과만 가질 수 있기 때문에, 콜백을 완전히 대체하지는 못합니다.
  
### 07 마이크로태스크

- 프라미스 핸들러 `.then/catch/finally`는 항상 비동기적으로 실행됩니다.
- **`PromiseJobs`(V8 엔진에선 마이크로태스크 큐) 내부 큐**   
  어떤 프라미스가 준비되었을 때 이 프라미스의 핸들러는 마이크로태스크 큐에 들어갑니다. 현재 스크립트가 끝나야 자바스크립트 엔진은 큐에서 작업을 꺼내 실행합니다.
- `unhandledrejection` 이벤트는 마이크로태스크 큐 끝에서 프라미스 에러가 처리되지 못할 때 발생합니다.

### 08 async와 await

- `async/await`로 프라미스를 쉽게 사용할 수 있습니다.
- function 앞에 `async` 키워드를 추가하면 함수는 언제나 프라미스를 반환합니다.
- async 함수 안에선 `await`를 사용할 수 있습니다. `await` 키워드를 만나면 프라미스가 처리될 때까지 기다립니다.
  - 기다리는 동안 엔진이 다른 일(다른 스크립트를 실행, 이벤트 처리 등)을 할 수 있기 때문에, CPU 리소스가 낭비되지 않습니다.
  - 처리가 완료되면, (`throw error`를 한 것처럼) 에러가 던져지거나, 프라미스 객체의 `result` 값이 반환됩니다.
  - 최상위 레벨 코드에선 사용할 수 없지만, 익명 `async` 함수로 코드를 감싸면 가능합니다.
  - `thenable` 객체를 받습니다.
  - `async` 클래스 메서드를 선언할 수 있습니다.
- `async/await`를 사용하면 `.then/catch`가 거의 필요 없습니다. 
  하지만 최상위 스코프에서 비동기 처리가 필요할 때같이 `.then/catch`가 필요한 경우가 생기기 때문에 `async/await`가 프라미스를 기반으로 한다는 사실을 알고 계셔야 합니다.
- `Promise.all`도 함께 활용할 수 있습니다.
